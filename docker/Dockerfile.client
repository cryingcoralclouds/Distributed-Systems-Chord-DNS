# Base image for Go
FROM golang:1.20

WORKDIR /app

# Copy the root go.mod and go.sum to resolve dependencies
COPY go.mod go.sum ./

# Install dependencies
RUN go mod tidy

# Copy the entire project (including test_suite and chord folders)
COPY . .

# Set working directory to test_suite
WORKDIR /app/test_suite

# Build the test suite binary
RUN go build -o test_suite .

# Command to run the test suite
CMD ["./test_suite"]
